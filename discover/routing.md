# 路由

我們需要添加一個超級重要的第三方套件：[Iron Router](https://github.com/EventedMind/iron-router)。它有三大功能：

1. 設定路由（網址列的路徑）。
2. 處理篩選（在網址列後方加入不同的參數或查詢）。
3. 管理訂閱（管控哪個路徑可以取得哪些資料）。

### 路由器的字彙知識

其實 Iron Router 參考了許多優良框架的設計，例如 Rails。許多詞彙都是通用的，下面這些詞彙可以建立對路由器的基礎瞭解：

1. 路由（Routes）：路由是整個路由機制運作的基礎單元。它是一組設定，告訴應用程式在遇到某一個網址時，要到哪裡去，以及要做什麼事。
2. 路徑（Paths）：路徑就是你的應用程式裡面的一個「網址（URL）」。可以是靜態的（`/terms_of_service`）或動態的（`/posts/xyz`），甚至還可以包含查詢參數（`/search?keyword=meteor`）。
3. 區段（Segments）：路徑的不同部分，根據 `/` 拆分的小單元。
4. 掛鉤（Hooks）：掛鉤是一些你打算進行的行動，可以發生在路由之前、之後、甚至是進行之中。一個標準的例子就是事前檢查用戶是否擁有瀏覽該頁面的權限。
5. 路由模板（Route Templates）：每一個路由都需要指向一個模板。若是你沒有指定，路由器預設會去尋找與路由同名的模板。
6. 排版檔（Layouts）：可以將排版檔視為內容的「外框」。排版檔包含目前模板外層所需要的所有 HTML 代碼，即使模板內容改變了，排版檔也維持不動。
7. 控制器（Controllers）：某些時候，你大多數的模板會重複使用相同的參數。為了不要一直重複撰寫相同的代碼，你可以讓這些路由去從一個單獨的「路由控制器」繼承那些通用的路由邏輯。

完整的路由器說明文件可以在[GitHub](https://github.com/EventedMind/iron-router)上看到。

## 路由：把網址對應到模板

Meteor 預設就只有「模板」，你可以從模板中呼叫模板，所以事實上還是可以自己建立一般框架常見的所謂「排版檔（Layout）」，也就是只包含 `<head>` 與 `<body>`，然後 `<body>` 裏擺一個主要模板，其實就與前面製作的 `main.html` 同義。

安裝了 Iron Router 之後，這套件把 Layout + Template 的模式帶了進來。先寫好一個預設的排版檔，在 `<body>` 裡擺一個 `{{> yield}}` 特殊標籤，路由器會自動根據路由的設定、替換成對應的模板。

![Layouts and Templates](https://book.discovermeteor.com/images/diagrams/router-diagram@2x.png)



